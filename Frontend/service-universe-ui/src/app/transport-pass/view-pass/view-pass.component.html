<div class="view-pass-container">
  <h2>View Transport Pass Details</h2>
  <p>Enter your Application ID or Email to view your active pass details.</p>

  <form [formGroup]="viewForm" (ngSubmit)="onSubmit()" class="view-form">
    <div class="form-group">
      <label for="appId">Application ID</label>
      <input
        id="appId"
        type="text"
        formControlName="appId"
        placeholder="Enter Application ID"
      />
    </div>

    <div class="or-divider">OR</div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Enter Email Address"
      />
    </div>

    <button type="submit" [disabled]="viewForm.invalid">View Pass</button>
  </form>

  <!-- Show error message if no pass found -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Handle multiple passes if returned as array -->
  <ng-container *ngIf="passDetails">
    <div class="pass-details">
      <h3>Pass Information</h3>
      <p><strong>Full Name:</strong> {{ passDetails.full_name }}</p>
      <p><strong>Email:</strong> {{ passDetails.email }}</p>
      <p><strong>Address:</strong> {{ passDetails.address }}</p>
      <p><strong>Pass Type:</strong> {{ passDetails.pass_type }}</p>
      <p><strong>Start Date:</strong> {{ passDetails.start_date }}</p>

      <h4>Usage History</h4>
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Route</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of passDetails.usageHistory">
            <td>{{ record.date }}</td>
            <td>{{ record.route }}</td>
            <td>{{ record.status }}</td>
          </tr>
        </tbody>
      </table>
    </div>

  </ng-container>

  <button class="back-btn mt-3" (click)="goBack()">Go Back</button>

</div>
